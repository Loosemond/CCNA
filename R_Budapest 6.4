en
conf t
hostname R_Budapest
username cisco secret class
username cisco privilege 15
ip domain-name CCNA-lab.com
line vty 0 4
transport input ssh
login local
exit
crypto key generate rsa modulus 1024
line con 0
login local
exit
ipv6 unicast-routing
service password-encryption


banner motd !Acesso Restrito a Utilizadores Autorizados!
banner login !Efetue um backup de segurança antes de efetuar alterações!

!---BGP
router bgp 60002
neighbor 209.165.200.98 remote-as 60000
no synchronization
exit

no ip route 0.0.0.0 0.0.0.0 209.165.200.98


!----OSPFv3
ipv6 router ospf 3
router-id 1.1.1.2
area 2 range 1000:0:0:20::/60
exit

!---SNMP
snmp-server community cisco ro

!---Interfaces
interface gigabitethernet0/0
description connect to SPN
ip address 209.165.200.97 255.255.255.252
no ip ospf 1 area 0
ipv6 address fe80::2 link-Local
bandwidth 100000
no shut
exit

! ----- INTERFACE LOOPBACK
interface Loopback0
description LoopBack Budapeste Software Development
ip address 172.19.32.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:20::1/64
ipv6 ospf 3 area 2
exit

interface Loopback1
description LoopBack Budapeste IT Staff
ip address 172.19.34.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:21::1/64
ipv6 ospf 3 area 2
exit

interface Loopback2
description LoopBack Budapeste Administrative Personal
ip address 172.19.36.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:22::1/64
ipv6 ospf 3 area 2
exit

interface Loopback3
description LoopBack Budapeste Building Management
ip address 172.19.38.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:23::1/64
ipv6 ospf 3 area 2
exit


interface Loopback4
description LoopBack Budapeste VoIP
ip address 172.19.40.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:24::1/64
ipv6 ospf 3 area 2
exit

interface Loopback5
description LoopBack Budapeste Development Server
ip address 172.19.42.1 255.255.254.0
ip ospf 1 area 2
ipv6 address 1000:0:0:25::1/64
ipv6 ospf 3 area 2
exit


!---VPN pag 518
!--- PSK -> Pre shared key
!--acl

ip access-list extended set3-acl
permit gre host 209.165.200.97 host 193.136.60.106
permit gre host 209.165.200.97 host 63.49.54.21
deny ip any any

crypto isakmp policy 10
encryption 3des
authentication pre-share
group 5 !--hellman
hash sha
Exit

crypto isakmp key ViBuda12345 address 193.136.60.106
crypto isakmp key BudaLiu12345 address 63.49.54.21

crypto ipsec transform-set tset1 esp-3des esp-sha-hmac
crypto map map1 10 ipsec-isakmp
set peer 193.136.60.106
set transform-set tset1
match address set3-acl

crypto ipsec transform-set tset2 esp-3des esp-sha-hmac
crypto map map1 10 ipsec-isakmp
set peer 63.49.54.21
set transform-set tset2
match address set3-acl

interface gigabitethernet0/0
description connect to SPN
crypto map map1
exit

interface Tunnel1
description VPN to Vienna
ip address 10.0.0.2 255.255.255.252
tunnel source 209.165.200.97
tunnel destination 193.136.60.106
ip ospf 1 area 0
ip ospf message-digest-key 1 md5 netacad
ip ospf hello-interval 20
ip ospf dead-interval 80
ipv6 address fe80::2 link-Local
ipv6 ospf 3 area 0
ipv6 ospf hello-interval 20
ipv6 ospf dead-interval 40
bandwidth 100000
exit

interface Tunnel2
description VPN to Budapeste
ip address 10.0.0.10 255.255.255.252
tunnel source 209.165.200.97
tunnel destination 63.49.54.21
ip ospf 1 area 0
ip ospf message-digest-key 1 md5 netacad
ip ospf hello-interval 20
ip ospf dead-interval 80
ip ospf cost 120
ipv6 address fe80::2 link-Local
ipv6 ospf cost 60000
ipv6 ospf 3 area 0
ipv6 ospf hello-interval 20
ipv6 ospf dead-interval 40
bandwidth 50000
exit

!----OSPFv2
router ospf 1
passive-interface default
no passive-interface Tunnel1
no passive-interface Tunnel2
router-id 1.1.1.2
network 172.19.64.0 0.0.15.255 area 2
area 1 range 172.19.64.0 255.255.240.0
area 0 authentication message-digest
default-information originate
exit


!-------HOST TABLE
ip host R_Vienna 193.136.60.106
ip host R_Budapest 209.165.200.97
ip host R_Liubliana 63.49.54.21
ip host R_Bratislava 56.16.20.214
ip host Sw1_Vienna 172.19.12.1
ip host Sw2_Vienna 172.19.12.2
ip host MLS1_Vienna 172.19.12.253
ip host MLS2_Vienna 172.19.12.252
ip host SPN 63.49.54.22 193.136.60.107 209.165.200.98

!---Clock

ntp server 193.136.60.106 prefer
exit

copy running-config startup-config
